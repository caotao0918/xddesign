

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>产品中心</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <link rel="stylesheet" href="../admin/layuiadmin/layui/css/layui.css" media="all">
  <link rel="stylesheet" href="../admin/layuiadmin/style/admin.css" media="all">
  <link rel="stylesheet" href="../admin/layuiadmin/style/template.css" media="all">
</head>
<body>

<div class="layui-fluid layadmin-cmdlist-fluid">
  <div class="layui-row layui-col-space30">
<!--    <div class="layui-col-md2 layui-col-sm4">-->
<!--        <div class="cmdlist-container">-->
<!--            <a href="javascript:;">-->
<!--              <img src="../admin/layuiadmin/style/res/template/portrait.png">-->
<!--            </a>-->
<!--            <a href="javascript:;">-->
<!--              <div class="cmdlist-text">-->
<!--                <p class="info">2018春夏季新款港味短款白色T恤+网纱中长款chic半身裙套装两件套</p>-->
<!--                <div class="price">-->
<!--                    <b>￥79</b>-->
<!--                    <p>-->
<!--                      ¥-->
<!--                      <del>130</del>-->
<!--                    </p>-->
<!--                    <span class="flow">-->
<!--                      <i class="layui-icon layui-icon-rate"></i>-->
<!--                      433-->
<!--                    </span>-->
<!--                </div>-->
<!--              </div>-->
<!--            </a>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="layui-col-md2 layui-col-sm4">-->
<!--        <div class="cmdlist-container">-->
<!--            <a href="javascript:;">-->
<!--              <img src="../admin/layuiadmin/style/res/template/portrait.png">-->
<!--            </a>-->
<!--            <a href="javascript:;">-->
<!--              <div class="cmdlist-text">-->
<!--                <p class="info">2018春夏季新款港味短款白色T恤+网纱中长款chic半身裙套装两件套</p>-->
<!--                <div class="price">-->
<!--                    <b>￥79</b>-->
<!--                    <p>-->
<!--                      ¥-->
<!--                      <del>130</del>-->
<!--                    </p>-->
<!--                    <span class="flow">-->
<!--                      <i class="layui-icon layui-icon-rate"></i>-->
<!--                      433-->
<!--                    </span>-->
<!--                </div>-->
<!--              </div>-->
<!--            </a>-->
<!--        </div>-->
<!--    </div>-->
  </div>
    <div class="layui-col-md12 layui-col-sm12">
        <div id="layuipage" style="left: 50%"></div>
    </div>
</div>


  <script src="../admin/layuiadmin/layui/layui.js"></script>
  <script>
  layui.config({
    base: '../admin/layuiadmin/' //静态资源所在路径
  }).extend({
    index: 'lib/index' //主入口模块
  }).use(['index']);
  layui.use(['laypage', 'layer'], function(){
  var laypage = layui.laypage;
  var layer = layui.layer;
  var $ = layui.$;

      function initLayPage(pageConf) {
          if (!pageConf) {
              pageConf = {};
              pageConf.size = 30;
              pageConf.current = 1;
          }
          $.get("/xddesign/admin/products", pageConf, function (data) {
                  laypage.render({
                      elem: 'layuipage',
                      count: data.total,
                      curr: pageConf.current,
                      limit: pageConf.size,
                      first: "首页",
                      last: "尾页",
                      layout: ['count', 'prev', 'page', 'next', 'limit', 'skip'],
                      jump: function (obj, first) {
                          if (!first) {
                              pageConf.current = obj.curr;
                              pageConf.size = obj.limit;
                              initLayPage(pageConf);
                          }
                      }
                  });
                  fillPage(data.records); //页面填充
          });
      }

      $(function () {
          initLayPage();
      });
      function fillPage(list){
          let product = '';
          let allproduct = $(".layui-row");
          for (let i = 0; i < list.length; i++) {
              let heart = Math.round(Math.random()*100+Math.random()*200);
              product += '<div class="layui-col-md2 layui-col-sm4"><div class="cmdlist-container"><a href="showprod.html?prodId='+list[i].productId+'">' +
                      '<img height="300px" alt="'+list[i].pictureList[0].pictureName+'" src="'+list[i].pictureList[0].pictureLink+'"></a>' +
                  '<a href="showprod.html?prodId='+list[i].productId+'"><div class="cmdlist-text"><p class="info">'+list[i].productName+'</p><div class="price"><b>￥'+list[i].price+'</b>' +
                  '<p></p><span class="flow"><i class="layui-icon layui-icon-heart"></i>'+heart+'</span></div></div></a></div></div>';
          }
          console.log(product);
          allproduct.html(product);
      }
});
  </script>
</body>
</html>